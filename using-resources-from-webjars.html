<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Using resources from WebJars | Scala.js SPA-tutorial</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="./running-the-server-in-a-separate-jvm.html" />
    
    
    <link rel="prev" href="./sharing-web-resources-between-js-and-jvm-projects.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="gitbook/style.css">
    
    

        
    <div class="book" data-level="6.3" data-basepath="." data-revision="Thu Apr 02 2015 22:08:03 GMT+0300 (FLE Daylight Time)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="getting-started.html">
            
                
                    <a href="./getting-started.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting started
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="application-structure.html">
            
                
                    <a href="./application-structure.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Application structure
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="the-client.html">
            
                
                    <a href="./the-client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        The Client
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="routing.html">
            
                
                    <a href="./routing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Routing
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="main-menu.html">
            
                
                    <a href="./main-menu.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Main menu
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="dashboard.html">
            
                
                    <a href="./dashboard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Dashboard
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="css-in-scala.html">
            
                
                    <a href="./css-in-scala.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.4.</b>
                        
                        CSS in Scala
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="integrating-javascript-components.html">
            
                
                    <a href="./integrating-javascript-components.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.5.</b>
                        
                        Integrating JavaScript components
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="todo-module-and-data-flow.html">
            
                
                    <a href="./todo-module-and-data-flow.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.6.</b>
                        
                        Todo module and data flow
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="autowire-and-upickle.html">
            
                
                    <a href="./autowire-and-upickle.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.7.</b>
                        
                        Autowire and uPickle
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="server-side.html">
            
                
                    <a href="./server-side.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Server side
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="testing.html">
            
                
                    <a href="./testing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Testing
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="debugging.html">
            
                
                    <a href="./debugging.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Debugging
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="logging.html">
            
                
                    <a href="./logging.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Logging
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="sbt-build-definition.html">
            
                
                    <a href="./sbt-build-definition.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        SBT build definition
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="serving-compiled-js-from-both-projects.html">
            
                
                    <a href="./serving-compiled-js-from-both-projects.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Serving compiled JS from both projects
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="sharing-web-resources-between-js-and-jvm-projects.html">
            
                
                    <a href="./sharing-web-resources-between-js-and-jvm-projects.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Sharing web resources between JS and JVM projects
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="6.3" data-path="using-resources-from-webjars.html">
            
                
                    <a href="./using-resources-from-webjars.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Using resources from WebJars
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="running-the-server-in-a-separate-jvm.html">
            
                
                    <a href="./running-the-server-in-a-separate-jvm.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Running the server in a separate JVM
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="production-build.html">
            
                
                    <a href="./production-build.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                        Production build
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="faq.html">
            
                
                    <a href="./faq.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        FAQ
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="what-next.html">
            
                
                    <a href="./what-next.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        What next?
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">Published with GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Share on Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Share on Google</button>
                <button type="button" data-sharing="facebook" class="button">Share on Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Share on Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Share on Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Scala.js SPA-tutorial</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="using-resources-from-webjars">Using resources from WebJars</h1>
<p><a href="http://www.webjars.org" target="_blank">WebJars</a> are a wonderful way to simplify inclusion of external resources such as JavaScript libraries and CSS definitions into
your own project. Instead of downloading JS/CSS packages like Bootstrap and extracting them within your project (or referring to external CDN
served resources), you can just add a dependency to the appropriate WebJar and you&apos;re all set! Well, except you aren&apos;t, unless you were using something
like Play, which this tutorial isn&apos;t using. So how do you actually get those resources out of a WebJar and into your web resource directory? The process
is a bit different for JavaScript, CSS (LESS) and other resources files.</p>
<h2 id="webjar-javascript">WebJar JavaScript</h2>
<p>Scala.js SBT plugin offers a <a href="http://www.scala-js.org/doc/sbt/depending.html" target="_blank">nice and convenient way</a> for extracting JavaScript sources from various
WebJars and concatenating them into a single JavaScript file that you can then refer to in your <code>index.html</code>. In the tutorial project this means following
configuration in the <code>build.scala</code> file:</p>
<pre><code class="lang-scala"><span class="hljs-comment">/** Dependencies for external JS libs that are bundled into a single .js file according to dependency order */</span>
<span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">jsDependencies</span> =</span> <span class="hljs-type">Def</span>.setting(<span class="hljs-type">Seq</span>(
  <span class="hljs-string">&quot;org.webjars&quot;</span> % <span class="hljs-string">&quot;react&quot;</span> % versions.react / <span class="hljs-string">&quot;react-with-addons.js&quot;</span> commonJSName <span class="hljs-string">&quot;React&quot;</span>,
  <span class="hljs-string">&quot;org.webjars&quot;</span> % <span class="hljs-string">&quot;jquery&quot;</span> % versions.jQuery / <span class="hljs-string">&quot;jquery.js&quot;</span>,
  <span class="hljs-string">&quot;org.webjars&quot;</span> % <span class="hljs-string">&quot;bootstrap&quot;</span> % versions.bootstrap / <span class="hljs-string">&quot;bootstrap.js&quot;</span> dependsOn <span class="hljs-string">&quot;jquery.js&quot;</span>,
  <span class="hljs-string">&quot;org.webjars&quot;</span> % <span class="hljs-string">&quot;chartjs&quot;</span> % versions.chartjs / <span class="hljs-string">&quot;Chart.js&quot;</span>,
  <span class="hljs-string">&quot;org.webjars&quot;</span> % <span class="hljs-string">&quot;log4javascript&quot;</span> % versions.log4js / <span class="hljs-string">&quot;js/log4javascript_uncompressed.js&quot;</span>
))

.jsSettings(
      jsDependencies      ++= {<span class="hljs-keyword">if</span> (!productionBuild.value) <span class="hljs-type">Settings</span>.jsDependencies.value <span class="hljs-keyword">else</span> <span class="hljs-type">Settings</span>.jsDependenciesProduction.value},
      jsDependencies      +=  <span class="hljs-type">RuntimeDOM</span> % <span class="hljs-string">&quot;test&quot;</span>,
      skip in packageJSDependencies := <span class="hljs-literal">false</span>,
</code></pre>
<p>This will produce a file named <code>web/js/scalajs-spa-jsdeps.js</code> containing all those JavaScript files combined.</p>
<h2 id="webjar-css-less">WebJar CSS/LESS</h2>
<p>For extracting CSS files from WebJars you could use the method described below, but there is bit more convenient method that gives you <a href="http://lesscss.org/" target="_blank">LESS</a>
processing as a bonus. First we&apos;ll need to add the <a href="https://github.com/sbt/sbt-less" target="_blank">sbt-less</a> plugin into our <code>plugins.sbt</code></p>
<pre><code class="lang-scala">addSbtPlugin(<span class="hljs-string">&quot;com.typesafe.sbt&quot;</span> % <span class="hljs-string">&quot;sbt-less&quot;</span> % <span class="hljs-string">&quot;1.0.6&quot;</span>)
</code></pre>
<p>The projects also need to enable the <code>sbt-web</code> plugin for this to work.</p>
<pre><code class="lang-scala">jvm.enablePlugins(<span class="hljs-type">SbtWeb</span>)
js.enablePlugins(<span class="hljs-type">SbtWeb</span>)
</code></pre>
<p>Because <code>sbt-less</code> and other <code>sbt-web</code> plugins are heavily related to the Play framework, we&apos;ll need to do some additional configuration to make it work with
our simple tutorial. We&apos;ll be storing LESS files under <code>src/main/assets</code> to keep them separated from directly copied resources.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> com.typesafe.sbt.less.<span class="hljs-type">Import</span>._

sourceDirectory in <span class="hljs-type">Assets</span>    := baseDirectory.value / <span class="hljs-string">&quot;src&quot;</span> / <span class="hljs-string">&quot;main&quot;</span> / <span class="hljs-string">&quot;assets&quot;</span>,
<span class="hljs-type">LessKeys</span>.compress in <span class="hljs-type">Assets</span>  := <span class="hljs-literal">true</span>,
</code></pre>
<p>The last line tells the LESS compiler to minify the produced CSS.</p>
<p>Next step is to create a <code>main.less</code> (yes, it has to be named exactly that) with references to CSS/LESS files inside the WebJars.
Note that due to a <a href="https://github.com/sbt/sbt-less/issues/30" target="_blank">bug</a> in <code>sbt-web</code> we cannot put the <code>mail.less</code> under the <code>shared</code> project where it belongs, but
must duplicate it to both JS and JVM projects.</p>
<pre><code class="lang-css"><span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;lib/bootstrap/less/bootstrap.less&quot;</span></span>;
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;lib/font-awesome/less/font-awesome.less&quot;</span></span>;

<span class="hljs-tag">body</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">padding-top</span>:<span class="hljs-value"> <span class="hljs-number">50px</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-class">.label-as-badge</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">border-radius</span>:<span class="hljs-value"> <span class="hljs-number">1em</span></span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>In this case we import Bootstrap and Font Awesome LESS files. Depending on the WebJar, it may or may not contain LESS files in addition to the CSS file. With
the LESS files you can easily <a href="http://getbootstrap.com/css/#less" target="_blank">configure the library</a> to your liking by defining CSS variables in your <code>main.less</code> file.</p>
<pre><code class="lang-css"><span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;lib/bootstrap/less/bootstrap.less&quot;</span></span>;
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;lib/font-awesome/less/font-awesome.less&quot;</span></span>;
<span class="hljs-at_rule">@<span class="hljs-keyword">brand-danger:</span>  #<span class="hljs-number">00534</span>f</span>;
</code></pre>
<p>The problem with the <code>sbt-less</code> plugin is that it saves the compiled CSS file into wrong directory (since we are not using Play), so we need to copy it
to the correct location. This will be covered in the next section.</p>
<h2 id="webjar-resource-files">WebJar resource files</h2>
<p>Sometimes WebJars contain other useful resources, such as the font files for Font Awesome in our case. Just including the WebJar as a dependency will provide
us the extracted contents, but it&apos;s in the wrong place and doesn&apos;t get bundled into the final package. So we will need to copy relevant files where
we want them.</p>
<p>To achieve this, we&apos;ll define our very own SBT task to do the job.</p>
<pre><code class="lang-scala"><span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">copyWebJarResources</span> =</span> <span class="hljs-type">TaskKey</span>[<span class="hljs-type">Unit</span>](<span class="hljs-string">&quot;Copy resources from WebJars&quot;</span>)

copyWebJarResources := {
  <span class="hljs-comment">// copy the compiled CSS</span>
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">s</span> =</span> streams.value
  s.log(<span class="hljs-string">&quot;Copying webjar resources&quot;</span>)
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">compiledCss</span> =</span> webTarget.value / <span class="hljs-string">&quot;less&quot;</span> / <span class="hljs-string">&quot;main&quot;</span> / <span class="hljs-string">&quot;stylesheets&quot;</span>
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">targetDir</span> =</span> (classDirectory in <span class="hljs-type">Compile</span>).value / <span class="hljs-string">&quot;web&quot;</span>
  <span class="hljs-type">IO</span>.createDirectory(targetDir / <span class="hljs-string">&quot;stylesheets&quot;</span>)
  <span class="hljs-type">IO</span>.copyDirectory(compiledCss, targetDir / <span class="hljs-string">&quot;stylesheets&quot;</span>)
  <span class="hljs-comment">// copy font-awesome fonts from WebJar</span>
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">fonts</span> =</span> (webModuleDirectory in <span class="hljs-type">Assets</span>).value / <span class="hljs-string">&quot;webjars&quot;</span> / <span class="hljs-string">&quot;lib&quot;</span> / <span class="hljs-string">&quot;font-awesome&quot;</span> / <span class="hljs-string">&quot;fonts&quot;</span>
  <span class="hljs-type">IO</span>.createDirectory(targetDir / <span class="hljs-string">&quot;fonts&quot;</span>)
  <span class="hljs-type">IO</span>.copyDirectory(fonts, targetDir / <span class="hljs-string">&quot;fonts&quot;</span>)
}
</code></pre>
<p>Without going into the SBT details, this task copies the generated CSS file (and its sourcemap) into <code>web/stylesheets</code>. It also copies all files found
under the Font Awesome <code>fonts</code> folder into the appropriate place under our project. If you need to copy other resources, you can use the same code just by
modifying the path definitions.</p>
<p>Finally we need to tell SBT to actually run this task at the appropriate moment. Since we need the compiled CSS output, it has to happen after the fact,
but it also has to happen before the application is finally put together so that the files are in place for packaging or running the app.</p>
<pre><code class="lang-scala"><span class="hljs-comment">// run the copy after compile/assets but before managed resources</span>
copyWebJarResources &lt;&lt;= copyWebJarResources dependsOn (compile in <span class="hljs-type">Compile</span>, assets in <span class="hljs-type">Compile</span>),
managedResources in <span class="hljs-type">Compile</span> &lt;&lt;= (managedResources in <span class="hljs-type">Compile</span>) dependsOn copyWebJarResources
</code></pre>
<p>NOTE! This whole procedure is IMHO a dirty hack, but couldn&apos;t find a better solution. If you do know a better way to do this, please create an issue.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./sharing-web-resources-between-js-and-jvm-projects.html" class="navigation navigation-prev " aria-label="Previous page: Sharing web resources between JS and JVM projects"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./running-the-server-in-a-separate-jvm.html" class="navigation navigation-next " aria-label="Next page: Running the server in a separate JVM"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
